$.login = <%= raw @login || false %>;
$.waiting = <%= raw @waiting || false %>;

if ($.login) {
  handleLoginSuccess();
} else {
  if ($.waiting) {
    handleActivate();
  } else {
    handleLoginError();
  }
}

function handleLoginError() {
  
  $("[name=authen]").parent().removeClass("state-success").addClass("state-error");
  $("[name=password]").parent().removeClass("state-success").addClass("state-error");

  $.smallBox({
    title : "Warning",
    content: "Invalid username or password.",
    color: "#C46A69",
    icon: "fa fa-warning",
    timeout: 6000
  });
}

function handleLoginSuccess() {
  window.location.href='/dashboard';
}

function handleActivate() {
  window.location.href='/users_activate';
}