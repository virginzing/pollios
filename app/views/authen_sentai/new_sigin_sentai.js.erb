$.login = <%= raw @login || false %>;
$.only_access_web = <%= raw @access_web || false %>;

$.feedback_access = <%= raw @feedback %>;
$.internal_survey = <%= raw @internal_survey %>;

if ($.login) {
  if ($.only_access_web) {
    handleLoginSuccess($.feedback_access, $.internal_survey);
  } else {
    handleOnlyAccessWeb();
  }
} else {
  handleLoginError();
}

function handleLoginError() {
  
  $("[name=authen]").parent().removeClass("state-success").addClass("state-error");
  $("[name=password]").parent().removeClass("state-success").addClass("state-error");

  $.smallBox({
    title : "Warning",
    content: "Invalid username or password.",
    color: "#C46A69",
    icon: "fa fa-warning",
    timeout: 6000
  });
}

function handleLoginSuccess(feedback, internal_survey) {
  console.log(feedback);
  console.log(internal_survey);
  
  if (feedback && internal_survey) {
    window.location.href = "<%= redirect_back select_services_url %>";
  } else if (feedback) {
    window.location.href = "<%= redirect_back feedback_dashboard_url %>";
  } else {
    window.location.href = "<%= redirect_back dashboard_url %>";
  };
    
}

function handleOnlyAccessWeb() {
  
  $("[name=authen]").parent().removeClass("state-success").addClass("state-error");
  $("[name=password]").parent().removeClass("state-success").addClass("state-error");

  $.smallBox({
    title : "Warning",
    content: "Only admin of company",
    color: "#C46A69",
    icon: "fa fa-warning",
    timeout: 6000
  });
}