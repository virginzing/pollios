<div class="row">
  <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
    <h1 class="page-title txt-color-blueDark">
      <i class="fa fa-group fa-fw "></i> 
        List Member
    </h1>
  </div>
</div>


<div class="well">
  <h4 class="alert-heading">Please Note!</h4>
  <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas magna lectus, eleifend sed augue a, commodo auctor turpis. Praesent ornare mi est, ac rutrum felis pharetra nec. Morbi aliquam turpis ut sagittis gravida. Quisque ut lacus eget justo hendrerit dignissim eget et nisl. Morbi quis augue lectus. Praesent placerat ultricies dolor, ut fringilla magna.<strong> Pollios</strong>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas.
  </p>
  <br>
<!--   <a href="#" class="icon-btn">
    <i class="fa fa-edit"></i>
    <div>Sub Group</div>
  </a> -->

  <a href="<%= company_add_member_url %>" class="icon-btn">
    <i class="fa fa-plus"></i>
    <div>Add User</div>
  </a>
</div>

<section id="widget-grid" class="">
  <div class="jarviswidget" id="wid-company-members" data-widget-editbutton="false" data-widget-colorbutton="false" data-widget-deletebutton="false" data-widget-fullscreenbutton="false">
    <header>
      <span class="widget-icon"> <i class="fa fa-group"></i> </span>
      <h2><strong>Members</strong></h2>          
    </header>

    <!-- widget div-->
    <div>
      
      <!-- widget content -->
        <div class="widget-body no-padding">

          <table id="company_members" class="table table-striped table-bordered table-hover" width="100%">
            <thead>
              <tr>
                <th>#</th>
                <th>Avatar</th>
                <th>Name</th>
                <th>Email</th>
                <th>Group</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <% @members.each do |member| %>
                <tr>
                  <td><%= member.id %></td>
                  <td><%= image_tag(member.avatar.url(:thumbnail), size: '30x30') %></td>
                  <td><%= member.get_name %></td>
                  <td><%= member.email %></td>
                  <td>
                    <ol>
                    <% (member.groups & group_company).each do |group| %>
                      <li><%= link_to group.name, "#" %></li>
                    <% end %>
                    </ol>
                  </td>
                  <td><a class="btn btn-default btn-danger" data-confirm="Are you sure?" data-method="delete" href="<%= remove_member_group_path(member_id: member.id) %>" rel="nofollow">Delete</a></td>
                </tr>
              <% end %>
            </tbody>
          </table>

        </div>
      <!-- end widget content -->
      
    </div>
    <!-- end widget div -->

  </div>
</section>


<script type="text/javascript">
  $( document ).ready(function() {
    $('.admin_status').editable({
      showbuttons: false,
      source: [
              {value: 1, text: 'Member'},
              {value: 2, text: 'Admin'}
      ],
      value: function(value) {
        $(this).text(value);
      },
      error: function(response, newValue) {
          if(response.status === 500) {
              return 'Service unavailable. Please try later.';
          } else {
              return response.responseText;
          }
      }
    });

  });
</script>
