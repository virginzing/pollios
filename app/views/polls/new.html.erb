<script type="text/javascript" src="/javascripts/validateform.js"></script>


<%= simple_form_for(@poll, :html => { :id => "build_poll"} )  do |f| %>

  <%= f.label :title %>
  <%= f.text_field :title %>
  <%= f.label :expire_date %>
  <select name="poll[expire_date]" id="e1">
    <option value="1">1 day</option>
    <option value="2">2 day</option>
    <option value="1">3 day</option>
    <option value="1">4 day</option>
    <option value="3">5 day</option>
    <option value="3">10 day</option>
  </select>

  <%= f.label :group %>
<!--   <%= f.select :group_id, current_member.get_group_active.map {|r| [r.name, r.id] }, options ={:prompt => "Select a group" } %> -->
  
  <select multiple id="poll_group_id" name="poll[group_id][]">
    <% current_member.get_group_active.each do |group| %>
      <option value="<%= group.id %>"><%= group.name %></option>
    <% end %>
  </select> 
  <br><br>

  <%= f.input :tag_tokens,:label => "Tag", :input_html => {:class => "tag_token", :id => "tag_lists" } %>
  <br>
  <%= f.label "Campaign" %>
  <%= f.select :campaign_id, current_member.campaigns.order('name desc').map {|r| [r.name, r.id ]}, { include_blank: true },  { id: "select_campaign" } %>
  <br>
  <%= f.label "Recurring" %>
  <%= f.select :recurring_id, list_recurring.map{ |r| [ r.description + " รันทุกๆ  " + r.period.strftime("%H:%M") + " น.", r.id.to_i]}, include_blank: true %>
  <br>
  <br>
  <label>Choice</label>
    <input type="text" name="poll[choice_one]">
    <input type="text" name="poll[choice_two]">

    <div class="multi-field-wrapper">
        <div class="multi-fields">
          <div class="multi-field">
            <input type="text" name="choices[]" class="answer">
            <button type="button" class="remove-field tiny btn-gray">Remove</button>
          </div>
        </div>
      <button type="button" class="add-field button tiny">More choice</button>
    </div>

  <%= f.submit class: 'button' %>
<% end %>

<script>
$('.multi-field-wrapper').each(function() {
    var $wrapper = $('.multi-fields', this);
    $(".add-field", $(this)).click(function(e) {
        $('.multi-field:first-child', $wrapper).clone(true).appendTo($wrapper).find('input').val('').focus();
    });
    $('.multi-field .remove-field', $wrapper).click(function() {
        if ($('.multi-field', $wrapper).length > 1)
            $(this).parent('.multi-field').remove();
    });
});
</script>
