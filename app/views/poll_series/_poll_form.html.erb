<div class="panel panel-redLight">  

  <div class="panel-heading">
      <h4 class="panel-title">New Poll</h4>
  </div>

  <div class="panel-body">

    <div class="panel-body-row">
      <div class="col-md-11 mgb-15">
      <section>
        <label class="label">Question</label>
        <label class="textarea">
          <%= f.input :title , label: false, as: :text %>
          <%= f.input :member_id, input_html: { value: current_member.id }, as: :hidden %>
          <%= f.input :type_poll, as: :hidden, input_html: { id: 'type_poll_' + Time.now.to_i.to_s } %>
        </label>
      </section>
      
      <section>
        <label class="label">Setting Choice Template</label>
        <div class="inline-group">
          <label class="checkbox">
            <input type="checkbox" name="checkbox-inline" id="<%= Time.now.to_i %>">
            <i></i>Ratting</label>
        </div>
      </section>

      <section class="collect_choices" id="collect_choices_<%= Time.now.to_i %>">
        <%= f.fields_for :choices do |builder| %>
          <%= render 'choice_fields', :f => builder %>
        <% end %>
        <%= f.link_to_add "More Choice", :choices, class: 'btn btn-sm btn-default add_new_choice btn-pill' %>
      </section>
      </div>

      <div class="col-md-1">
        <span class="remove_poll">
          <%= f.link_to_remove "Remove Poll", class: "btn btn-default btn-xs" %>
        </span>
      </div>
    </div>

  </div>

  <div class="panel-footer text-align-center">
  </div>

</div>

<script type="text/javascript">
$("input[name=checkbox-inline]").click(function() {
  var $this = $(this);
  var $id = $this.attr('id')
  // $this will contain a reference to the checkbox   
  if ($this.is(':checked')) {
    hideCollectionChoice($id);
  } else {
    showCollectionChoice($id);
  }
});

function hideCollectionChoice (id) {
  $("#collect_choices_" + id).hide();
  $("#type_poll_" + id).attr('value', 2);
}

function showCollectionChoice (id) {
  $("#collect_choices_" + id).show();
  $("#type_poll_" + id).attr('value', 3);
}
</script>


